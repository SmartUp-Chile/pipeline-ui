{"version":3,"sources":["../src/utils/formatters.ts","../src/context/PipelineProvider.tsx","../src/components/timeline/TimelineEvent.tsx","../src/components/shared/Button.tsx","../src/components/shared/Badge.tsx","../src/services/api.ts","../src/hooks/useApi.ts","../src/components/history/HistoryView.tsx","../src/components/shared/Modal.tsx","../src/components/pipeline/StartPipelineModal.tsx","../src/hooks/useSessions.ts","../src/hooks/useWebSocket.ts"],"names":["truncate","useMemo","jsx","jsxs","useState","useCallback","useRef","useEffect"],"mappings":"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","file":"index.js","sourcesContent":["// Utility formatters\n\nexport function formatRelativeTime(dateStr?: string): string {\n  if (!dateStr) return '';\n\n  const date = new Date(dateStr);\n  const now = new Date();\n  const diff = now.getTime() - date.getTime();\n\n  if (diff < 0) return 'just now';\n  if (diff < 60000) return 'just now';\n  if (diff < 3600000) return `${Math.floor(diff / 60000)}m ago`;\n  if (diff < 86400000) return `${Math.floor(diff / 3600000)}h ago`;\n  if (diff < 604800000) return `${Math.floor(diff / 86400000)}d ago`;\n\n  return date.toLocaleDateString();\n}\n\nexport function formatTimestamp(dateStr?: string): string {\n  if (!dateStr) return '';\n\n  const date = new Date(dateStr);\n  return date.toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    hour12: true,\n  });\n}\n\n// Alias for formatTimestamp\nexport const formatTime = formatTimestamp;\n\nexport function formatDate(dateStr?: string): string {\n  if (!dateStr) return '';\n\n  const date = new Date(dateStr);\n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nexport function formatDateTime(dateStr?: string): string {\n  if (!dateStr) return '';\n\n  const date = new Date(dateStr);\n  return date.toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nexport function formatCost(cost?: number): string {\n  if (cost === undefined || cost === null) return '-';\n  return `$${cost.toFixed(4)}`;\n}\n\nexport function formatDuration(ms?: number): string {\n  if (ms === undefined || ms === null) return '-';\n\n  if (ms < 1000) return `${ms}ms`;\n  if (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;\n  if (ms < 3600000) return `${Math.floor(ms / 60000)}m ${Math.floor((ms % 60000) / 1000)}s`;\n\n  const hours = Math.floor(ms / 3600000);\n  const minutes = Math.floor((ms % 3600000) / 60000);\n  return `${hours}h ${minutes}m`;\n}\n\nexport function formatNumber(num?: number): string {\n  if (num === undefined || num === null) return '-';\n  return num.toLocaleString();\n}\n\nexport function formatPercentage(value?: number): string {\n  if (value === undefined || value === null) return '-';\n  return `${value.toFixed(1)}%`;\n}\n\nexport function formatBytes(bytes?: number): string {\n  if (bytes === undefined || bytes === null) return '-';\n\n  if (bytes < 1024) return `${bytes} B`;\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n  if (bytes < 1024 * 1024 * 1024) return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n\n  return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n}\n\nexport function truncate(str: string, length: number): string {\n  if (str.length <= length) return str;\n  return str.slice(0, length - 3) + '...';\n}\n\nexport function getStatusColor(status: string): string {\n  switch (status) {\n    case 'running':\n      return 'var(--pipeline-status-running)';\n    case 'waiting_approval':\n      return 'var(--pipeline-status-waiting)';\n    case 'completed':\n      return 'var(--pipeline-status-success)';\n    case 'failed':\n      return 'var(--pipeline-status-failed)';\n    default:\n      return 'var(--pipeline-text-muted)';\n  }\n}\n\nexport function getStatusLabel(status: string): string {\n  switch (status) {\n    case 'running':\n      return 'Running';\n    case 'waiting_approval':\n      return 'Waiting Approval';\n    case 'completed':\n      return 'Completed';\n    case 'failed':\n      return 'Failed';\n    default:\n      return status;\n  }\n}\n","import { createContext, useContext, useMemo, type ReactNode } from 'react';\nimport type { PipelineUIConfig } from '../types';\n\n// Default configuration\nconst defaultConfig: PipelineUIConfig = {\n  apiBaseUrl: '',\n  features: {\n    allowApproval: true,\n    allowDelete: true,\n    allowShareLinks: true,\n    enableLiveView: true,\n  },\n  labels: {\n    liveViewTitle: 'Live Pipelines',\n    historyViewTitle: 'Session History',\n    noSessionsFound: 'No sessions found',\n    loadingSessions: 'Loading sessions...',\n    selectSessionPrompt: 'Select a session to view details',\n    statusRunning: 'Running',\n    statusWaitingApproval: 'Waiting',\n    statusCompleted: 'Completed',\n    statusFailed: 'Failed',\n    approve: 'Approve',\n    reject: 'Reject',\n    delete: 'Delete',\n    watchLive: 'Watch Live',\n    copyLink: 'Share',\n    noEvents: 'No events',\n    eventCount: 'events',\n  },\n};\n\n// Context\nconst PipelineContext = createContext<PipelineUIConfig>(defaultConfig);\n\n// Hook to use the config\nexport function usePipelineConfig(): PipelineUIConfig {\n  return useContext(PipelineContext);\n}\n\n// Helper hook to get merged labels\nexport function useLabels() {\n  const config = usePipelineConfig();\n  return useMemo(() => ({\n    ...defaultConfig.labels,\n    ...config.labels,\n  }), [config.labels]);\n}\n\n// Helper hook to get merged features\nexport function useFeatures() {\n  const config = usePipelineConfig();\n  return useMemo(() => ({\n    ...defaultConfig.features,\n    ...config.features,\n  }), [config.features]);\n}\n\n// Provider props\ninterface PipelineProviderProps {\n  children: ReactNode;\n  config: PipelineUIConfig;\n}\n\n/**\n * PipelineProvider - Wrap your app with this to configure the pipeline UI components\n *\n * @example\n * ```tsx\n * import { PipelineProvider } from '@smartup/pipeline-ui';\n *\n * function App() {\n *   return (\n *     <PipelineProvider config={{\n *       apiBaseUrl: 'https://api.example.com',\n *       headers: { 'Authorization': `Bearer ${token}` },\n *       linkBuilders: {\n *         taskUrl: (id) => `https://tasks.example.com/${id}`,\n *       },\n *     }}>\n *       <YourApp />\n *     </PipelineProvider>\n *   );\n * }\n * ```\n */\nexport function PipelineProvider({ children, config }: PipelineProviderProps) {\n  const mergedConfig = useMemo<PipelineUIConfig>(() => ({\n    ...defaultConfig,\n    ...config,\n    features: {\n      ...defaultConfig.features,\n      ...config.features,\n    },\n    labels: {\n      ...defaultConfig.labels,\n      ...config.labels,\n    },\n  }), [config]);\n\n  return (\n    <PipelineContext.Provider value={mergedConfig}>\n      {children}\n    </PipelineContext.Provider>\n  );\n}\n\nexport { PipelineContext };\n","import { useState, useMemo, useCallback } from 'react';\nimport { marked } from 'marked';\nimport type { PipelineEvent } from '../../types';\nimport { formatTime } from '../../utils/formatters';\nimport { usePipelineConfig } from '../../context/PipelineProvider';\nimport './TimelineEvent.css';\n\nexport interface TimelineEventProps {\n  event: PipelineEvent;\n  isGrouped?: boolean;\n}\n\n// URL patterns for link extraction\nconst GITHUB_PR_PATTERN = /https:\\/\\/github\\.com\\/([^/]+)\\/([^/]+)\\/pull\\/(\\d+)/gi;\nconst GITHUB_COMMIT_PATTERN = /https:\\/\\/github\\.com\\/([^/]+)\\/([^/]+)\\/commit\\/([a-f0-9]+)/gi;\n\n// Event config: icon, color class, and how to extract title/subtitle\ntype EventConfig = {\n  icon: string;\n  colorClass: string;\n  getTitle: (e: PipelineEvent) => string;\n  getSubtitle?: (e: PipelineEvent) => string | undefined;\n  isMinor?: boolean;\n};\n\nconst EVENT_CONFIG: Record<string, EventConfig> = {\n  // Lifecycle - Major events\n  started: {\n    icon: '',\n    colorClass: 'success',\n    getTitle: () => 'Pipeline Started',\n    getSubtitle: (e) => `${e.data.workflowType || ''}`\n  },\n  completed: {\n    icon: '',\n    colorClass: 'success',\n    getTitle: () => 'Pipeline Completed',\n    getSubtitle: (e) => e.data.cost ? `$${(e.data.cost as number).toFixed(4)}` : undefined\n  },\n  failed: {\n    icon: '',\n    colorClass: 'error',\n    getTitle: () => 'Pipeline Failed',\n    getSubtitle: (e) => e.data.error as string\n  },\n  init: {\n    icon: '',\n    colorClass: 'muted',\n    getTitle: () => 'Session Initialized',\n    getSubtitle: (e) => `${e.data.model}, ${e.data.tools} tools`\n  },\n  waiting_approval: {\n    icon: '',\n    colorClass: 'warning',\n    getTitle: () => 'Waiting for Approval',\n  },\n  approved: {\n    icon: '',\n    colorClass: 'success',\n    getTitle: () => 'Plan Approved',\n  },\n  rejected: {\n    icon: '',\n    colorClass: 'error',\n    getTitle: () => 'Plan Rejected',\n  },\n\n  // Workflow events\n  prefetch_start: {\n    icon: '',\n    colorClass: 'muted',\n    getTitle: () => 'Prefetching task...',\n    isMinor: true\n  },\n  prefetch_complete: {\n    icon: '',\n    colorClass: 'muted',\n    getTitle: () => 'Task prefetched',\n    isMinor: true\n  },\n  task_fetched: {\n    icon: '',\n    colorClass: 'primary',\n    getTitle: (e) => (e.data.title as string) || 'Task Fetched',\n    getSubtitle: (e) => e.data.taskId as string\n  },\n  plan_generated: {\n    icon: '',\n    colorClass: 'primary',\n    getTitle: () => 'Plan Generated',\n  },\n  execution_started: {\n    icon: '',\n    colorClass: 'primary',\n    getTitle: () => 'Execution Started',\n  },\n  repos_selected: {\n    icon: '',\n    colorClass: 'primary',\n    getTitle: (e) => {\n      const repos = e.data.repos as string[] | undefined;\n      return repos?.length ? `Selected: ${repos.join(', ')}` : 'Repositories Selected';\n    }\n  },\n  evaluation_complete: {\n    icon: '',\n    colorClass: 'success',\n    getTitle: (e) => {\n      const requires = e.data.requiresCode;\n      return requires ? 'Task requires code changes' : 'Task evaluated';\n    }\n  },\n\n  // Agent events\n  agent_start: {\n    icon: '',\n    colorClass: 'purple',\n    getTitle: (e) => (e.data.agentType as string) || 'Agent',\n    getSubtitle: (e) => (e.data.agentDescription as string)\n  },\n  agent_started: {\n    icon: '',\n    colorClass: 'purple',\n    getTitle: (e) => (e.data.agentType as string) || 'Agent',\n    getSubtitle: (e) => (e.data.agentDescription as string)\n  },\n  agent_complete: {\n    icon: '',\n    colorClass: 'success',\n    getTitle: (e) => `${(e.data.agentType as string) || 'Agent'} Complete`,\n  },\n  agent_completed: {\n    icon: '',\n    colorClass: 'success',\n    getTitle: (e) => `${(e.data.agentType as string) || 'Agent'} Complete`,\n  },\n\n  // Tool events\n  tool_call: {\n    icon: '',\n    colorClass: 'tool',\n    getTitle: (e) => getToolTitle(e),\n    getSubtitle: (e) => getToolSubtitle(e)\n  },\n  tool_start: {\n    icon: '',\n    colorClass: 'tool',\n    getTitle: (e) => getToolTitle(e),\n    getSubtitle: (e) => getToolSubtitle(e)\n  },\n  tool_complete: {\n    icon: '',\n    colorClass: 'success',\n    getTitle: (e) => `${(e.data.toolName as string) || 'Tool'} complete`,\n    isMinor: true\n  },\n\n  // MCP events\n  mcp_call: {\n    icon: '',\n    colorClass: 'orange',\n    getTitle: (e) => getMcpTitle(e),\n    getSubtitle: (e) => getMcpSubtitle(e)\n  },\n  mcp_start: {\n    icon: '',\n    colorClass: 'orange',\n    getTitle: (e) => getMcpTitle(e),\n    getSubtitle: (e) => getMcpSubtitle(e)\n  },\n  mcp_complete: {\n    icon: '',\n    colorClass: 'success',\n    getTitle: (e) => `${(e.data.mcpTool as string) || 'MCP'} complete`,\n    isMinor: true\n  },\n\n  // Messages\n  assistant_message: {\n    icon: '',\n    colorClass: 'primary',\n    getTitle: () => 'Claude',\n    getSubtitle: (e) => truncate((e.data.preview as string) || (e.data.text as string), 100)\n  },\n\n  // Debug events - Minor\n  sdk_message: {\n    icon: '',\n    colorClass: 'muted',\n    getTitle: (e) => getSdkMessageTitle(e),\n    getSubtitle: (e) => getSdkMessageSubtitle(e),\n    isMinor: true\n  },\n  sdk_thinking: {\n    icon: '',\n    colorClass: 'muted',\n    getTitle: () => 'Thinking',\n    getSubtitle: (e) => truncate((e.data.thinking as string), 80),\n    isMinor: true\n  },\n  timing: {\n    icon: '',\n    colorClass: 'muted',\n    getTitle: (e) => `${e.data.event || 'Event'}`,\n    getSubtitle: (e) => `${e.data.durationMs}ms`,\n    isMinor: true\n  },\n  token_usage: {\n    icon: '',\n    colorClass: 'muted',\n    getTitle: () => 'Token Usage',\n    getSubtitle: (e) => `${e.data.inputTokens || 0} in / ${e.data.outputTokens || 0} out`,\n    isMinor: true\n  },\n  tool_input_full: {\n    icon: '',\n    colorClass: 'muted',\n    getTitle: (e) => getToolInputFullTitle(e),\n    getSubtitle: (e) => getToolInputFullSubtitle(e),\n    isMinor: true\n  },\n  tool_output_full: {\n    icon: '',\n    colorClass: 'muted',\n    getTitle: (e) => getToolOutputTitle(e),\n    getSubtitle: (e) => getToolOutputSubtitle(e),\n    isMinor: true\n  },\n\n  // Code Review\n  code_review_result: {\n    icon: '',\n    colorClass: 'primary',\n    getTitle: (e) => `Code Review: ${e.data.verdict || 'Complete'}`,\n  },\n\n  // Audit\n  audit_generated: {\n    icon: '',\n    colorClass: 'success',\n    getTitle: () => 'Audit Report Generated',\n    getSubtitle: (e) => {\n      const outcome = e.data.outcome as string | undefined;\n      const taskTitle = e.data.taskTitle as string | undefined;\n      return outcome ? `${outcome}${taskTitle ? ` - ${taskTitle}` : ''}` : undefined;\n    }\n  },\n\n  // Error\n  error: {\n    icon: '',\n    colorClass: 'error',\n    getTitle: () => 'Error',\n    getSubtitle: (e) => e.data.error as string || e.data.message as string\n  },\n  budget_exceeded: {\n    icon: '',\n    colorClass: 'error',\n    getTitle: () => 'Budget Exceeded',\n  }\n};\n\n// Helper functions\nfunction truncate(text: string | undefined, max: number): string | undefined {\n  if (!text) return undefined;\n  return text.length > max ? text.substring(0, max) + '...' : text;\n}\n\nfunction getFileName(path: string): string {\n  return path.split('/').pop() || path;\n}\n\nfunction getFilePath(path: string): string {\n  const parts = path.split('/');\n  if (parts.length <= 3) return path;\n  return '.../' + parts.slice(-3).join('/');\n}\n\nfunction getToolTitle(e: PipelineEvent): string {\n  const name = (e.data.toolName as string) || (e.data.name as string) || 'Tool';\n  const input = e.data.toolInput as Record<string, unknown> | undefined;\n\n  if (name === 'Bash' && input?.description) {\n    return input.description as string;\n  }\n  if (name === 'Read' && input?.file_path) {\n    return `Read ${getFileName(input.file_path as string)}`;\n  }\n  if (name === 'Write' && input?.file_path) {\n    return `Write ${getFileName(input.file_path as string)}`;\n  }\n  if (name === 'Edit' && input?.file_path) {\n    return `Edit ${getFileName(input.file_path as string)}`;\n  }\n  if (name === 'Grep' && input?.pattern) {\n    return `Search: ${input.pattern}`;\n  }\n  if (name === 'Glob' && input?.pattern) {\n    return `Find: ${input.pattern}`;\n  }\n  return name;\n}\n\nfunction getToolSubtitle(e: PipelineEvent): string | undefined {\n  const name = (e.data.toolName as string) || (e.data.name as string);\n  const input = e.data.toolInput as Record<string, unknown> | undefined;\n\n  if ((name === 'Read' || name === 'Write' || name === 'Edit') && input?.file_path) {\n    return getFilePath(input.file_path as string);\n  }\n  if ((name === 'Grep' || name === 'Glob') && input?.path) {\n    return input.path as string;\n  }\n  if (name === 'Bash' && input?.command) {\n    return truncate(input.command as string, 60);\n  }\n  return undefined;\n}\n\nfunction getMcpTitle(e: PipelineEvent): string {\n  const tool = (e.data.mcpTool as string) || (e.data.toolName as string) || 'MCP';\n  const input = e.data.toolInput as Record<string, unknown> | undefined;\n\n  if (tool.includes('view_task') && input?.taskId) {\n    return `View Task`;\n  }\n  if (tool.includes('add_comment')) {\n    return `Add Comment`;\n  }\n  if (tool.includes('update_task')) {\n    return `Update Task`;\n  }\n  if (tool.includes('create_pull_request')) {\n    return `Create PR`;\n  }\n\n  return tool.replace('shapeup_', '').replace('admin_', '').replace(/_/g, ' ');\n}\n\nfunction getMcpSubtitle(e: PipelineEvent): string | undefined {\n  const server = e.data.mcpServer as string;\n  const input = e.data.toolInput as Record<string, unknown> | undefined;\n\n  if (input?.taskId) {\n    return `${input.taskId}`;\n  }\n  if (input?.repoName) {\n    return input.repoName as string;\n  }\n  if (server) {\n    return `via ${server}`;\n  }\n  return undefined;\n}\n\nfunction getToolInputFullTitle(e: PipelineEvent): string {\n  const toolName = (e.data.toolName as string) || 'Tool';\n  const input = e.data.input as Record<string, unknown> | undefined;\n\n  if (input?.description) {\n    return input.description as string;\n  }\n\n  if (toolName === 'Read' && input?.file_path) {\n    return `Read ${getFileName(input.file_path as string)}`;\n  }\n  if (toolName === 'Write' && input?.file_path) {\n    return `Write ${getFileName(input.file_path as string)}`;\n  }\n  if (toolName === 'Edit' && input?.file_path) {\n    return `Edit ${getFileName(input.file_path as string)}`;\n  }\n  if (toolName === 'Grep' && input?.pattern) {\n    return `Search: ${truncate(input.pattern as string, 40)}`;\n  }\n  if (toolName === 'Glob' && input?.pattern) {\n    return `Find: ${truncate(input.pattern as string, 40)}`;\n  }\n\n  return `Input: ${toolName}`;\n}\n\nfunction getToolInputFullSubtitle(e: PipelineEvent): string | undefined {\n  const toolName = (e.data.toolName as string) || '';\n  const input = e.data.input as Record<string, unknown> | undefined;\n\n  if ((toolName === 'Read' || toolName === 'Write' || toolName === 'Edit') && input?.file_path) {\n    return getFilePath(input.file_path as string);\n  }\n  if (toolName === 'Bash' && input?.command) {\n    return truncate(input.command as string, 50);\n  }\n  if ((toolName === 'Grep' || toolName === 'Glob') && input?.path) {\n    return input.path as string;\n  }\n  return undefined;\n}\n\nfunction getToolOutputTitle(e: PipelineEvent): string {\n  const toolName = typeof e.data.toolName === 'string' ? e.data.toolName : undefined;\n  const output = typeof e.data.output === 'string' ? e.data.output : undefined;\n\n  if (!toolName || toolName === 'unknown') {\n    if (output) {\n      if (output.includes('lines read from')) return ' File read';\n      if (output.includes('Successfully wrote')) return ' File written';\n      if (output.includes('Successfully edited')) return ' File edited';\n      if (output.includes('matches found') || output.includes('No matches')) return ' Search complete';\n      if (output.includes('files matched')) return ' Files found';\n      if (output.includes('exit code') || output.includes('stdout:')) return ' Command executed';\n    }\n    return ' Tool complete';\n  }\n\n  if (toolName === 'Read') return ' File read';\n  if (toolName === 'Write') return ' File written';\n  if (toolName === 'Edit') return ' File edited';\n  if (toolName === 'Bash') return ' Command executed';\n  if (toolName === 'Grep') return ' Search complete';\n  if (toolName === 'Glob') return ' Files found';\n  if (toolName === 'Task') return ' Task complete';\n  if (toolName.startsWith('mcp__')) {\n    const cleanName = toolName.split('__').pop()?.replace(/_/g, ' ') || toolName;\n    return ` ${cleanName}`;\n  }\n\n  return ` ${toolName} complete`;\n}\n\nfunction getToolOutputSubtitle(e: PipelineEvent): string | undefined {\n  const output = typeof e.data.output === 'string' ? e.data.output : undefined;\n  if (!output) return undefined;\n\n  if (output.includes('lines read')) {\n    const match = output.match(/(\\d+) lines? read/);\n    if (match) return `${match[1]} lines`;\n  }\n  if (output.includes('matches found')) {\n    const match = output.match(/(\\d+) matches? found/);\n    if (match) return `${match[1]} matches`;\n  }\n  if (output.includes('files matched')) {\n    const match = output.match(/(\\d+) files? matched/);\n    if (match) return `${match[1]} files`;\n  }\n\n  return truncate(output, 50);\n}\n\nfunction getSdkMessageTitle(e: PipelineEvent): string {\n  const raw = e.data.raw as Record<string, unknown> | undefined;\n  if (raw?.type === 'system') {\n    return 'System Init';\n  }\n  if (raw?.type === 'assistant') {\n    const message = raw.message as Record<string, unknown> | undefined;\n    const content = message?.content as Array<Record<string, unknown>> | undefined;\n\n    if (content && Array.isArray(content) && content.length > 0) {\n      const toolUse = content.find(c => c.type === 'tool_use');\n      if (toolUse?.name && typeof toolUse.name === 'string') {\n        const input = toolUse.input as Record<string, unknown> | undefined;\n        return getNextActionTitle(toolUse.name, input);\n      }\n      const textBlock = content.find(c => c.type === 'text' && c.text && typeof c.text === 'string');\n      if (textBlock?.text && typeof textBlock.text === 'string') {\n        return truncate(textBlock.text, 80) || 'Claude';\n      }\n    }\n    return 'Claude';\n  }\n  if (raw?.type === 'user') {\n    const content = raw.content as Array<Record<string, unknown>> | undefined;\n    if (content && Array.isArray(content) && content.length > 0) {\n      const toolResult = content.find(c => c.type === 'tool_result');\n      if (toolResult) {\n        const resultContent = toolResult.content;\n        if (typeof resultContent === 'string' && resultContent.length > 0) {\n          const preview = extractResultPreview(resultContent);\n          if (preview) return preview;\n        } else if (Array.isArray(resultContent) && resultContent.length > 0) {\n          const textBlock = resultContent.find((c: unknown) =>\n            typeof c === 'object' && c !== null && (c as Record<string, unknown>).type === 'text'\n          ) as Record<string, unknown> | undefined;\n          if (textBlock?.text && typeof textBlock.text === 'string') {\n            const preview = extractResultPreview(textBlock.text);\n            if (preview) return preview;\n          }\n        }\n        return 'Tool Result';\n      }\n    }\n    return 'Tool Result';\n  }\n  if (raw?.type === 'result') {\n    return 'Tool Result';\n  }\n  return (typeof raw?.type === 'string' ? raw.type : undefined) || 'SDK Message';\n}\n\nfunction getNextActionTitle(toolName: string, input?: Record<string, unknown>): string {\n  if (toolName === 'Edit' && typeof input?.file_path === 'string') {\n    return ` Edit ${getFileName(input.file_path)}`;\n  }\n  if (toolName === 'Write' && typeof input?.file_path === 'string') {\n    return ` Write ${getFileName(input.file_path)}`;\n  }\n  if (toolName === 'Read' && typeof input?.file_path === 'string') {\n    return ` Read ${getFileName(input.file_path)}`;\n  }\n  if (toolName === 'Bash' && typeof input?.description === 'string') {\n    return ` ${input.description}`;\n  }\n  if (toolName === 'Bash' && typeof input?.command === 'string') {\n    return ` Run: ${truncate(input.command, 50)}`;\n  }\n  if (toolName === 'Grep' && typeof input?.pattern === 'string') {\n    return ` Search: ${truncate(input.pattern, 40)}`;\n  }\n  if (toolName === 'Glob' && typeof input?.pattern === 'string') {\n    return ` Find: ${truncate(input.pattern, 40)}`;\n  }\n  if (toolName === 'Task' && typeof input?.description === 'string') {\n    return ` ${input.description}`;\n  }\n  if (toolName.startsWith('mcp__')) {\n    const cleanName = toolName.split('__').pop()?.replace(/_/g, ' ') || toolName;\n    return ` ${cleanName}`;\n  }\n  return ` ${toolName}`;\n}\n\nfunction extractResultPreview(content: string): string | undefined {\n  if (content.length < 100) {\n    return `Result: ${truncate(content, 60)}`;\n  }\n  if (content.includes('Successfully')) {\n    const match = content.match(/Successfully[^.!]*/);\n    if (match) return truncate(match[0], 60);\n  }\n  if (content.includes('Error:') || content.includes('error:')) {\n    const match = content.match(/[Ee]rror:[^.!\\n]*/);\n    if (match) return truncate(match[0], 60);\n  }\n  return undefined;\n}\n\nfunction getSdkMessageSubtitle(e: PipelineEvent): string | undefined {\n  const raw = e.data.raw as Record<string, unknown> | undefined;\n  if (raw?.type === 'system' && raw?.model) {\n    return `${raw.model}`;\n  }\n  return undefined;\n}\n\n// Detect links in event data\nfunction extractLinks(\n  event: PipelineEvent,\n  taskUrlBuilder?: (taskId: string) => string\n): Array<{ type: 'shapeup' | 'github-pr' | 'github-commit' | 'github-repo'; url: string; label: string }> {\n  const links: Array<{ type: 'shapeup' | 'github-pr' | 'github-commit' | 'github-repo'; url: string; label: string }> = [];\n  const dataStr = JSON.stringify(event.data);\n\n  // GitHub PR links\n  const prMatches = dataStr.matchAll(GITHUB_PR_PATTERN);\n  for (const match of prMatches) {\n    links.push({\n      type: 'github-pr',\n      url: match[0],\n      label: `PR #${match[3]}`\n    });\n  }\n\n  // GitHub commit links\n  const commitMatches = dataStr.matchAll(GITHUB_COMMIT_PATTERN);\n  for (const match of commitMatches) {\n    links.push({\n      type: 'github-commit',\n      url: match[0],\n      label: `Commit ${match[3].substring(0, 7)}`\n    });\n  }\n\n  // Task IDs\n  const input = event.data.toolInput as Record<string, unknown> | undefined;\n  if (input?.taskId && typeof input.taskId === 'string') {\n    const url = taskUrlBuilder\n      ? taskUrlBuilder(input.taskId)\n      : `https://shapeup.smartup.lat/v2/tasks/${input.taskId}`;\n    links.push({\n      type: 'shapeup',\n      url,\n      label: 'View Task'\n    });\n  }\n  if (event.data.taskId && typeof event.data.taskId === 'string') {\n    const url = taskUrlBuilder\n      ? taskUrlBuilder(event.data.taskId)\n      : `https://shapeup.smartup.lat/v2/tasks/${event.data.taskId}`;\n    links.push({\n      type: 'shapeup',\n      url,\n      label: 'View Task'\n    });\n  }\n\n  // PR URL in results\n  if (event.data.prUrl) {\n    links.push({\n      type: 'github-pr',\n      url: event.data.prUrl as string,\n      label: 'View PR'\n    });\n  }\n\n  return links;\n}\n\nexport function TimelineEvent({ event, isGrouped }: TimelineEventProps) {\n  const [expanded, setExpanded] = useState(false);\n  const config = usePipelineConfig();\n\n  const eventConfig = EVENT_CONFIG[event.type] || {\n    icon: '',\n    colorClass: 'muted',\n    getTitle: () => event.type.replace(/_/g, ' '),\n  };\n\n  const title = useMemo(() => eventConfig.getTitle(event), [eventConfig, event]);\n  const subtitle = useMemo(() => eventConfig.getSubtitle?.(event), [eventConfig, event]);\n  const links = useMemo(\n    () => extractLinks(event, config.linkBuilders?.taskUrl),\n    [event, config.linkBuilders?.taskUrl]\n  );\n\n  const hasDetails = useMemo(() => {\n    if (event.type === 'assistant_message' && event.data.text) return true;\n    if (event.type === 'plan_generated' && event.data.plan) return true;\n    if (event.type === 'sdk_thinking' && event.data.thinking) return true;\n    if (event.type === 'code_review_result') return true;\n    if (event.type === 'tool_call' && event.data.toolInput) return true;\n    if (event.type === 'agent_start' && event.data.toolInput) return true;\n    if (event.type === 'audit_generated' && event.data.markdownReport) return true;\n    return Object.keys(event.data).length > 0;\n  }, [event]);\n\n  const handleClick = useCallback(() => {\n    if (hasDetails) {\n      setExpanded(prev => !prev);\n    }\n  }, [hasDetails]);\n\n  return (\n    <div\n      className={`pipeline-event pipeline-event-${eventConfig.colorClass} ${isGrouped ? 'pipeline-event-grouped' : ''} ${expanded ? 'pipeline-event-expanded' : ''} ${hasDetails ? 'pipeline-event-clickable' : ''}`}\n      onClick={handleClick}\n    >\n      {/* Main row */}\n      <div className=\"pipeline-event-row\">\n        <span className=\"pipeline-event-icon\">{eventConfig.icon}</span>\n        <span className=\"pipeline-event-title\">{title}</span>\n        {subtitle && <span className=\"pipeline-event-subtitle\">{subtitle}</span>}\n\n        {/* Quick action links */}\n        {links.length > 0 && (\n          <div className=\"pipeline-event-links\">\n            {links.slice(0, 2).map((link, i) => (\n              <a\n                key={i}\n                href={link.url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className={`pipeline-event-link pipeline-event-link-${link.type}`}\n                onClick={(e) => e.stopPropagation()}\n              >\n                {link.type === 'shapeup' && ''}\n                {link.type === 'github-pr' && ''}\n                {link.type === 'github-commit' && ''}\n                {link.label}\n              </a>\n            ))}\n          </div>\n        )}\n\n        <span className=\"pipeline-event-time\">{formatTime(event.timestamp)}</span>\n        {(event.turnNumber ?? event.turn) !== undefined && (\n          <span className=\"pipeline-event-turn\">T{event.turnNumber ?? event.turn}</span>\n        )}\n        {hasDetails && (\n          <span className={`pipeline-event-chevron ${expanded ? 'pipeline-event-chevron-open' : ''}`}></span>\n        )}\n      </div>\n\n      {/* Expanded content */}\n      {expanded && <ExpandedContent event={event} />}\n    </div>\n  );\n}\n\nfunction ExpandedContent({ event }: { event: PipelineEvent }) {\n  const content = useMemo(() => {\n    // Assistant messages - render markdown\n    if (event.type === 'assistant_message' && event.data.text) {\n      return (\n        <div\n          className=\"pipeline-event-markdown\"\n          dangerouslySetInnerHTML={{ __html: marked.parse(event.data.text as string) as string }}\n        />\n      );\n    }\n\n    // Plan - render markdown\n    if (event.type === 'plan_generated' && event.data.plan) {\n      return (\n        <div\n          className=\"pipeline-event-markdown\"\n          dangerouslySetInnerHTML={{ __html: marked.parse(event.data.plan as string) as string }}\n        />\n      );\n    }\n\n    // Thinking\n    if (event.type === 'sdk_thinking' && event.data.thinking) {\n      return (\n        <div className=\"pipeline-event-thinking\">\n          {event.data.thinking as string}\n        </div>\n      );\n    }\n\n    // Tool calls - show input nicely\n    if ((event.type === 'tool_call' || event.type === 'tool_start') && event.data.toolInput) {\n      const input = event.data.toolInput as Record<string, unknown>;\n      const toolName = (event.data.toolName as string) || '';\n\n      // Special rendering for Edit\n      if (toolName === 'Edit') {\n        const oldStr = input.old_string as string | undefined;\n        const newStr = input.new_string as string | undefined;\n        return (\n          <div className=\"pipeline-event-diff\">\n            <div className=\"pipeline-event-filepath\">{input.file_path as string}</div>\n            {oldStr && (\n              <div className=\"pipeline-event-diff-removed\">- {truncateCode(oldStr, 200)}</div>\n            )}\n            {newStr && (\n              <div className=\"pipeline-event-diff-added\">+ {truncateCode(newStr, 200)}</div>\n            )}\n          </div>\n        );\n      }\n\n      // Special rendering for Bash\n      if (toolName === 'Bash' && input.command) {\n        return (\n          <div className=\"pipeline-event-code\">\n            <span className=\"pipeline-event-code-prompt\">$</span> {input.command as string}\n          </div>\n        );\n      }\n\n      // Default: show as JSON\n      return (\n        <pre className=\"pipeline-event-json\">{JSON.stringify(input, null, 2)}</pre>\n      );\n    }\n\n    // Agent start - show prompt preview\n    if (event.type === 'agent_start' || event.type === 'agent_started') {\n      const input = event.data.toolInput as Record<string, unknown> | undefined;\n      if (input?.prompt) {\n        return (\n          <div className=\"pipeline-event-prompt\">\n            {truncateCode(input.prompt as string, 500)}\n          </div>\n        );\n      }\n    }\n\n    // Code review\n    if (event.type === 'code_review_result') {\n      const verdict = event.data.verdict as string | undefined;\n      const body = event.data.body as string | undefined;\n      return (\n        <div className=\"pipeline-event-review\">\n          {verdict && (\n            <div className={`pipeline-event-verdict pipeline-event-verdict-${verdict.toLowerCase()}`}>\n              {verdict === 'APPROVE' && ' Approved'}\n              {verdict === 'CHANGES_REQUESTED' && ' Changes Requested'}\n              {verdict === 'COMMENT' && ' Commented'}\n            </div>\n          )}\n          {body && (\n            <div\n              className=\"pipeline-event-markdown\"\n              dangerouslySetInnerHTML={{ __html: marked.parse(body) as string }}\n            />\n          )}\n        </div>\n      );\n    }\n\n    // Audit report - show markdown\n    if (event.type === 'audit_generated') {\n      const markdownReport = event.data.markdownReport as string | undefined;\n      const outcome = event.data.outcome as string | undefined;\n      if (markdownReport) {\n        return (\n          <div className=\"pipeline-event-audit\">\n            <div className={`pipeline-event-audit-outcome pipeline-event-audit-outcome-${outcome || 'partial'}`}>\n              Outcome: {outcome || 'Unknown'}\n            </div>\n            <div\n              className=\"pipeline-event-markdown\"\n              dangerouslySetInnerHTML={{ __html: marked.parse(markdownReport) as string }}\n            />\n          </div>\n        );\n      }\n    }\n\n    // Default: JSON dump\n    return (\n      <pre className=\"pipeline-event-json\">{JSON.stringify(event.data, null, 2)}</pre>\n    );\n  }, [event]);\n\n  return <div className=\"pipeline-event-details\">{content}</div>;\n}\n\nfunction truncateCode(code: string, max: number): string {\n  if (code.length <= max) return code;\n  return code.substring(0, max) + '\\n... (truncated)';\n}\n\n// Export for grouping logic\nexport function isMinorEvent(event: PipelineEvent): boolean {\n  const eventConfig = EVENT_CONFIG[event.type];\n  return eventConfig?.isMinor === true;\n}\n\n// Events that should be hidden from UI (only used for internal calculations)\nexport function shouldHideEvent(event: PipelineEvent): boolean {\n  if (event.type === 'timing') {\n    const eventName = event.data.event as string;\n    if (eventName === 'turn_complete') {\n      return true;\n    }\n  }\n  return false;\n}\n","import { forwardRef, type ButtonHTMLAttributes, type ReactNode } from 'react';\nimport './Button.css';\n\ntype ButtonVariant = 'primary' | 'secondary' | 'ghost' | 'danger' | 'success';\ntype ButtonSize = 'sm' | 'md' | 'lg';\n\nexport interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: ButtonVariant;\n  size?: ButtonSize;\n  icon?: ReactNode;\n  iconRight?: ReactNode;\n  loading?: boolean;\n  fullWidth?: boolean;\n}\n\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>(\n  (\n    {\n      variant = 'primary',\n      size = 'md',\n      icon,\n      iconRight,\n      loading,\n      fullWidth,\n      className,\n      disabled,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    return (\n      <button\n        ref={ref}\n        className={[\n          'pipeline-btn',\n          `pipeline-btn-${variant}`,\n          `pipeline-btn-${size}`,\n          fullWidth && 'pipeline-btn-full-width',\n          loading && 'pipeline-btn-loading',\n          className,\n        ]\n          .filter(Boolean)\n          .join(' ')}\n        disabled={disabled || loading}\n        {...props}\n      >\n        {loading && <span className=\"pipeline-btn-spinner\" />}\n        {icon && !loading && <span className=\"pipeline-btn-icon\">{icon}</span>}\n        {children && <span className=\"pipeline-btn-label\">{children}</span>}\n        {iconRight && <span className=\"pipeline-btn-icon-right\">{iconRight}</span>}\n      </button>\n    );\n  }\n);\n\nButton.displayName = 'Button';\n","import type { ReactNode } from 'react';\nimport type { PipelineStatus } from '../../types';\nimport './Badge.css';\n\ntype BadgeVariant = 'default' | 'primary' | 'success' | 'warning' | 'danger' | 'info';\ntype BadgeSize = 'sm' | 'md';\n\nexport interface BadgeProps {\n  children: ReactNode;\n  variant?: BadgeVariant;\n  /** Convenience prop - maps pipeline status to appropriate variant */\n  status?: PipelineStatus;\n  size?: BadgeSize;\n  dot?: boolean;\n  pulse?: boolean;\n  className?: string;\n}\n\nfunction statusToVariant(status: PipelineStatus): BadgeVariant {\n  switch (status) {\n    case 'running':\n      return 'info';\n    case 'waiting_approval':\n      return 'warning';\n    case 'completed':\n      return 'success';\n    case 'failed':\n      return 'danger';\n    default:\n      return 'default';\n  }\n}\n\nexport function Badge({\n  children,\n  variant = 'default',\n  status,\n  size = 'md',\n  dot = false,\n  pulse = false,\n  className,\n}: BadgeProps) {\n  // If status is provided, use it to determine variant\n  const effectiveVariant = status ? statusToVariant(status) : variant;\n  // Running status should pulse\n  const shouldPulse = pulse || status === 'running';\n\n  return (\n    <span\n      className={[\n        'pipeline-badge',\n        `pipeline-badge-${effectiveVariant}`,\n        `pipeline-badge-${size}`,\n        dot && 'pipeline-badge-with-dot',\n        shouldPulse && 'pipeline-badge-pulse',\n        className,\n      ]\n        .filter(Boolean)\n        .join(' ')}\n    >\n      {(dot || shouldPulse) && <span className=\"pipeline-badge-dot\" />}\n      {children}\n    </span>\n  );\n}\n","// Configurable API Client for Pipeline UI\nimport type {\n  StartPipelineRequest,\n  Session,\n  SessionDetail,\n  PipelineEvent,\n  ListSessionsResponse,\n  ApprovePipelineResponse,\n  ResumeSessionResponse,\n  PipelineUIConfig,\n} from '../types';\n\n/**\n * Creates an API client configured with the provided settings\n */\nexport function createApiClient(config: PipelineUIConfig) {\n  const { apiBaseUrl, fetchFn = fetch, headers: customHeaders = {} } = config;\n\n  async function fetchJson<T>(url: string, options?: RequestInit): Promise<T> {\n    const res = await fetchFn(url, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...customHeaders,\n        ...options?.headers,\n      },\n    });\n\n    if (!res.ok) {\n      const error = await res.json().catch(() => ({ error: res.statusText }));\n      throw new Error(error.error || `HTTP ${res.status}`);\n    }\n\n    return res.json();\n  }\n\n  return {\n    // ============================================\n    // PIPELINE ENDPOINTS\n    // ============================================\n\n    async startPipeline(request: StartPipelineRequest): Promise<{\n      pipelineId: string;\n      status: string;\n      message: string;\n      wsUrl: string;\n    }> {\n      return fetchJson(`${apiBaseUrl}/api/pipeline/start`, {\n        method: 'POST',\n        body: JSON.stringify(request),\n      });\n    },\n\n    async getPipeline(pipelineId: string): Promise<{\n      pipelineId: string;\n      status: string;\n      sessionId?: string;\n      events: PipelineEvent[];\n      result?: unknown;\n    }> {\n      return fetchJson(`${apiBaseUrl}/api/pipeline/${pipelineId}`);\n    },\n\n    async approvePipeline(\n      pipelineId: string,\n      approved: boolean,\n      feedback?: string\n    ): Promise<ApprovePipelineResponse> {\n      return fetchJson(`${apiBaseUrl}/api/pipeline/${pipelineId}/approve`, {\n        method: 'POST',\n        body: JSON.stringify({ approved, feedback }),\n      });\n    },\n\n    async listActivePipelines(): Promise<{\n      pipelines: Array<{\n        pipelineId: string;\n        status: string;\n        sessionId?: string;\n        eventCount: number;\n        taskId?: string;\n        taskTitle?: string;\n      }>;\n    }> {\n      return fetchJson(`${apiBaseUrl}/api/pipelines`);\n    },\n\n    // ============================================\n    // SESSION ENDPOINTS\n    // ============================================\n\n    async listSessions(params: {\n      status?: string;\n      source?: 'local' | 'merged';\n      limit?: number;\n      offset?: number;\n    } = {}): Promise<ListSessionsResponse> {\n      const searchParams = new URLSearchParams();\n      if (params.status) searchParams.set('status', params.status);\n      if (params.source) searchParams.set('source', params.source);\n      if (params.limit) searchParams.set('limit', params.limit.toString());\n      if (params.offset) searchParams.set('offset', params.offset.toString());\n\n      return fetchJson(`${apiBaseUrl}/api/sessions?${searchParams}`);\n    },\n\n    async getSession(pipelineId: string, includeEvents = true): Promise<SessionDetail> {\n      return fetchJson(\n        `${apiBaseUrl}/api/sessions/${pipelineId}?includeEvents=${includeEvents}`\n      );\n    },\n\n    async getResumableSessions(): Promise<{\n      sessions: Session[];\n      count: number;\n    }> {\n      return fetchJson(`${apiBaseUrl}/api/sessions/resumable`);\n    },\n\n    async resumeSession(\n      pipelineId: string,\n      approved: boolean,\n      feedback?: string\n    ): Promise<ResumeSessionResponse> {\n      return fetchJson(`${apiBaseUrl}/api/sessions/${pipelineId}/resume`, {\n        method: 'POST',\n        body: JSON.stringify({ approved, feedback }),\n      });\n    },\n\n    async deleteSession(pipelineId: string): Promise<{ message: string; pipelineId: string }> {\n      return fetchJson(`${apiBaseUrl}/api/sessions/${pipelineId}`, {\n        method: 'DELETE',\n      });\n    },\n\n    // ============================================\n    // HEALTH CHECK\n    // ============================================\n\n    async healthCheck(): Promise<{\n      status: string;\n      version: string;\n      activePipelines: number;\n      modelProvider?: string;\n    }> {\n      return fetchJson(`${apiBaseUrl}/health`);\n    },\n\n    // ============================================\n    // WEBSOCKET URL\n    // ============================================\n\n    getWebSocketUrl(pipelineId: string): string {\n      if (config.getWebSocketUrl) {\n        return config.getWebSocketUrl(pipelineId);\n      }\n\n      // Default: derive from apiBaseUrl\n      const url = new URL(apiBaseUrl || window.location.origin);\n      const protocol = url.protocol === 'https:' ? 'wss:' : 'ws:';\n      return `${protocol}//${url.host}/ws/${pipelineId}`;\n    },\n  };\n}\n\n// Type for the API client\nexport type PipelineApiClient = ReturnType<typeof createApiClient>;\n\n/**\n * Extract task ID from a URL or return as-is if already an ID\n */\nexport function extractTaskId(input: string): string {\n  if (!input.includes('/')) {\n    return input.trim();\n  }\n  const parts = input.split('/');\n  return parts[parts.length - 1].trim();\n}\n","import { useMemo } from 'react';\nimport { usePipelineConfig } from '../context/PipelineProvider';\nimport { createApiClient, type PipelineApiClient } from '../services/api';\n\n/**\n * Hook to get the configured API client\n *\n * @example\n * ```tsx\n * function MyComponent() {\n *   const api = useApi();\n *\n *   const handleClick = async () => {\n *     const sessions = await api.listSessions();\n *     console.log(sessions);\n *   };\n *\n *   return <button onClick={handleClick}>Load Sessions</button>;\n * }\n * ```\n */\nexport function useApi(): PipelineApiClient {\n  const config = usePipelineConfig();\n\n  return useMemo(() => createApiClient(config), [config]);\n}\n","import { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport type { Session, SessionDetail, PipelineStatus, PipelineEvent } from '../../types';\nimport { TimelineEvent, isMinorEvent, shouldHideEvent } from '../timeline';\nimport { Button } from '../shared/Button';\nimport { Badge } from '../shared/Badge';\nimport { useApi } from '../../hooks/useApi';\nimport { formatDate, formatDuration, formatCost } from '../../utils/formatters';\nimport './HistoryView.css';\n\ntype EventCategory = 'lifecycle' | 'workflow' | 'agent' | 'tool' | 'mcp' | 'debug' | 'error';\n\nexport interface HistoryViewProps {\n  /** Callback when user wants to watch a running pipeline live */\n  onConnectLive?: (pipelineId: string, taskTitle?: string) => void;\n  /** Pre-selected pipeline ID (from URL routing) */\n  selectedPipelineId?: string;\n  /** Callback when session selection changes */\n  onSessionSelect?: (pipelineId: string | null) => void;\n  /** Custom class name */\n  className?: string;\n}\n\nconst STATUS_FILTERS: Array<{ value: PipelineStatus | 'all'; label: string }> = [\n  { value: 'all', label: 'All' },\n  { value: 'running', label: 'Running' },\n  { value: 'waiting_approval', label: 'Waiting' },\n  { value: 'completed', label: 'Completed' },\n  { value: 'failed', label: 'Failed' },\n];\n\nconst CATEGORY_FILTERS: Array<{ value: EventCategory | 'all'; label: string }> = [\n  { value: 'all', label: 'All' },\n  { value: 'lifecycle', label: 'Lifecycle' },\n  { value: 'workflow', label: 'Workflow' },\n  { value: 'agent', label: 'Agent' },\n  { value: 'tool', label: 'Tool' },\n  { value: 'error', label: 'Error' },\n];\n\nconst EVENT_CATEGORIES: Record<string, EventCategory> = {\n  started: 'lifecycle',\n  completed: 'lifecycle',\n  failed: 'lifecycle',\n  waiting_approval: 'lifecycle',\n  approved: 'lifecycle',\n  rejected: 'lifecycle',\n  workflow_started: 'workflow',\n  workflow_step: 'workflow',\n  plan_generated: 'workflow',\n  task_fetched: 'workflow',\n  prefetch_complete: 'workflow',\n  repo_selected: 'workflow',\n  code_review_result: 'workflow',\n  audit_generated: 'workflow',\n  agent_started: 'agent',\n  agent_completed: 'agent',\n  subagent_start: 'agent',\n  subagent_stop: 'agent',\n  tool_start: 'tool',\n  tool_complete: 'tool',\n  tool_error: 'tool',\n  mcp_start: 'mcp',\n  mcp_complete: 'mcp',\n  mcp_error: 'mcp',\n  error: 'error',\n  budget_exceeded: 'error',\n};\n\nconst PAGE_SIZE = 20;\n\nexport function HistoryView({\n  onConnectLive,\n  selectedPipelineId,\n  onSessionSelect,\n  className,\n}: HistoryViewProps) {\n  const api = useApi();\n\n  const [sessions, setSessions] = useState<Session[]>([]);\n  const [selectedSession, setSelectedSession] = useState<SessionDetail | null>(null);\n  const [statusFilter, setStatusFilter] = useState<PipelineStatus | 'all'>('all');\n  const [eventFilter, setEventFilter] = useState<EventCategory | 'all'>('all');\n  const [loading, setLoading] = useState(true);\n  const [loadingDetail, setLoadingDetail] = useState(false);\n  const [page, setPage] = useState(0);\n  const [total, setTotal] = useState(0);\n  const [deleteConfirm, setDeleteConfirm] = useState<string | null>(null);\n  const [resuming, setResuming] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n  const [linkCopied, setLinkCopied] = useState(false);\n  const [panelCollapsed, setPanelCollapsed] = useState(false);\n\n  // Multi-selection state\n  const [selectedEventIndices, setSelectedEventIndices] = useState<Set<number>>(new Set());\n  const [lastClickedIndex, setLastClickedIndex] = useState<number | null>(null);\n  const [copySuccess, setCopySuccess] = useState(false);\n\n  // Fetch sessions list\n  const fetchSessions = useCallback(async () => {\n    setLoading(true);\n    try {\n      const result = await api.listSessions({\n        status: statusFilter !== 'all' ? statusFilter : undefined,\n        source: 'merged',\n        limit: PAGE_SIZE,\n        offset: page * PAGE_SIZE,\n      });\n      const sortedSessions = [...result.sessions].sort((a, b) =>\n        new Date(b.createdAt || 0).getTime() - new Date(a.createdAt || 0).getTime()\n      );\n      setSessions(sortedSessions);\n      setTotal(result.total);\n    } catch (err) {\n      console.error('Failed to fetch sessions:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [api, statusFilter, page]);\n\n  useEffect(() => {\n    fetchSessions();\n  }, [fetchSessions]);\n\n  // Fetch session detail\n  const fetchSessionDetail = useCallback(async (pipelineId: string) => {\n    setLoadingDetail(true);\n    try {\n      const session = await api.getSession(pipelineId);\n      setSelectedSession(session);\n    } catch (err) {\n      console.error('Failed to fetch session:', err);\n    } finally {\n      setLoadingDetail(false);\n    }\n  }, [api]);\n\n  // Load session from URL when selectedPipelineId is provided\n  useEffect(() => {\n    if (selectedPipelineId && selectedPipelineId !== selectedSession?.pipelineId) {\n      fetchSessionDetail(selectedPipelineId);\n    }\n  }, [selectedPipelineId, fetchSessionDetail, selectedSession?.pipelineId]);\n\n  const handleSelectSession = useCallback((session: Session) => {\n    onSessionSelect?.(session.pipelineId);\n    // Always fetch full detail to get events\n    fetchSessionDetail(session.pipelineId);\n  }, [fetchSessionDetail, onSessionSelect]);\n\n  const handleCopyLink = useCallback(() => {\n    if (!selectedSession) return;\n    const url = `${window.location.origin}/session/${selectedSession.pipelineId}`;\n    navigator.clipboard.writeText(url).then(() => {\n      setLinkCopied(true);\n      setTimeout(() => setLinkCopied(false), 2000);\n    });\n  }, [selectedSession]);\n\n  const handleResume = useCallback(async (approved: boolean) => {\n    if (!selectedSession) return;\n    setResuming(true);\n    try {\n      await api.resumeSession(selectedSession.pipelineId, approved);\n      onConnectLive?.(selectedSession.pipelineId, selectedSession.taskTitle);\n      fetchSessions();\n    } catch (err) {\n      console.error('Failed to resume session:', err);\n    } finally {\n      setResuming(false);\n    }\n  }, [api, selectedSession, onConnectLive, fetchSessions]);\n\n  const handleDelete = useCallback(async () => {\n    if (!deleteConfirm) return;\n    setDeleting(true);\n    try {\n      await api.deleteSession(deleteConfirm);\n      if (selectedSession?.pipelineId === deleteConfirm) {\n        setSelectedSession(null);\n      }\n      setDeleteConfirm(null);\n      fetchSessions();\n    } catch (err) {\n      console.error('Failed to delete session:', err);\n    } finally {\n      setDeleting(false);\n    }\n  }, [api, deleteConfirm, selectedSession, fetchSessions]);\n\n  const filteredEvents = useMemo((): PipelineEvent[] => {\n    if (!selectedSession?.events) return [];\n\n    const visibleEvents = selectedSession.events.filter((e: PipelineEvent) => !shouldHideEvent(e));\n\n    if (eventFilter === 'all') {\n      return visibleEvents.filter(\n        (e: PipelineEvent) => EVENT_CATEGORIES[e.type] !== 'debug'\n      );\n    }\n    return visibleEvents.filter(\n      (e: PipelineEvent) => EVENT_CATEGORIES[e.type] === eventFilter\n    );\n  }, [selectedSession, eventFilter]);\n\n  // Clear selection when session changes\n  useEffect(() => {\n    setSelectedEventIndices(new Set());\n    setLastClickedIndex(null);\n  }, [selectedSession?.pipelineId]);\n\n  // Handle event selection with Cmd/Ctrl+click and Shift+click\n  const handleEventSelect = useCallback((index: number, event: React.MouseEvent) => {\n    event.stopPropagation();\n\n    if (event.shiftKey && lastClickedIndex !== null) {\n      const start = Math.min(lastClickedIndex, index);\n      const end = Math.max(lastClickedIndex, index);\n      const newSelection = new Set(selectedEventIndices);\n      for (let i = start; i <= end; i++) {\n        newSelection.add(i);\n      }\n      setSelectedEventIndices(newSelection);\n    } else if (event.metaKey || event.ctrlKey) {\n      const newSelection = new Set(selectedEventIndices);\n      if (newSelection.has(index)) {\n        newSelection.delete(index);\n      } else {\n        newSelection.add(index);\n      }\n      setSelectedEventIndices(newSelection);\n      setLastClickedIndex(index);\n    } else {\n      if (selectedEventIndices.has(index) && selectedEventIndices.size === 1) {\n        setSelectedEventIndices(new Set());\n        setLastClickedIndex(null);\n      } else {\n        setSelectedEventIndices(new Set([index]));\n        setLastClickedIndex(index);\n      }\n    }\n  }, [selectedEventIndices, lastClickedIndex]);\n\n  const handleSelectAll = useCallback(() => {\n    const allIndices = new Set<number>(filteredEvents.map((_: PipelineEvent, i: number) => i));\n    setSelectedEventIndices(allIndices);\n  }, [filteredEvents]);\n\n  const handleClearSelection = useCallback(() => {\n    setSelectedEventIndices(new Set());\n    setLastClickedIndex(null);\n  }, []);\n\n  const handleCopySelected = useCallback(async () => {\n    const selectedEvents = Array.from(selectedEventIndices)\n      .sort((a, b) => a - b)\n      .map(i => filteredEvents[i])\n      .filter(Boolean);\n\n    if (selectedEvents.length === 0) return;\n\n    const text = JSON.stringify(selectedEvents, null, 2);\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopySuccess(true);\n      setTimeout(() => setCopySuccess(false), 2000);\n    } catch (err) {\n      console.error('Failed to copy:', err);\n    }\n  }, [selectedEventIndices, filteredEvents]);\n\n  const totalPages = Math.ceil(total / PAGE_SIZE);\n\n  return (\n    <div className={`pipeline-history ${className || ''}`}>\n      {/* Sessions List Panel */}\n      <div className={`pipeline-history-list ${panelCollapsed ? 'pipeline-history-list-collapsed' : ''}`}>\n        <button\n          className=\"pipeline-history-collapse-toggle\"\n          onClick={() => setPanelCollapsed(!panelCollapsed)}\n          title={panelCollapsed ? 'Expand panel' : 'Collapse panel'}\n        >\n          {panelCollapsed ? '\\u2192' : '\\u2190'}\n        </button>\n\n        <div className=\"pipeline-history-collapsed-indicator\" onClick={() => setPanelCollapsed(false)}>\n          <span className=\"pipeline-history-collapsed-icon\">&#128203;</span>\n          <span className=\"pipeline-history-collapsed-count\">{total} sessions</span>\n        </div>\n\n        <div className=\"pipeline-history-list-header\">\n          <h2 className=\"pipeline-history-list-title\">Session History</h2>\n          <div className=\"pipeline-history-status-filters\">\n            {STATUS_FILTERS.map((filter) => (\n              <button\n                key={filter.value}\n                className={`pipeline-history-status-filter ${statusFilter === filter.value ? 'active' : ''} ${filter.value !== 'all' ? filter.value : ''}`}\n                onClick={() => {\n                  setStatusFilter(filter.value);\n                  setPage(0);\n                }}\n              >\n                {filter.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"pipeline-history-sessions-list\">\n          {loading ? (\n            <div className=\"pipeline-history-loading\">\n              <div className=\"pipeline-history-loading-spinner\" />\n              Loading sessions...\n            </div>\n          ) : sessions.length === 0 ? (\n            <div className=\"pipeline-history-empty\">\n              No sessions found\n            </div>\n          ) : (\n            sessions.map((session) => (\n              <div\n                key={session.pipelineId}\n                className={`pipeline-history-session-item ${selectedSession?.pipelineId === session.pipelineId ? 'selected' : ''}`}\n                onClick={() => handleSelectSession(session)}\n              >\n                <div className=\"pipeline-history-session-top\">\n                  <h4 className=\"pipeline-history-session-title\">\n                    {session.taskTitle || session.taskId || session.pipelineId}\n                  </h4>\n                  <span className={`pipeline-history-session-status ${session.status}`}>\n                    {session.status.replace('_', ' ')}\n                  </span>\n                </div>\n                <div className=\"pipeline-history-session-meta\">\n                  <span className=\"pipeline-history-session-workflow\">{session.workflowType}</span>\n                  <span className=\"pipeline-history-session-date\">{formatDate(session.createdAt)}</span>\n                  {session.cost !== undefined && (\n                    <span className=\"pipeline-history-session-cost\">{formatCost(session.cost)}</span>\n                  )}\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        {totalPages > 1 && (\n          <div className=\"pipeline-history-pagination\">\n            <span className=\"pipeline-history-page-info\">\n              {page * PAGE_SIZE + 1}-{Math.min((page + 1) * PAGE_SIZE, total)} of {total}\n            </span>\n            <div className=\"pipeline-history-page-buttons\">\n              <button\n                className=\"pipeline-history-page-btn\"\n                onClick={() => setPage(p => p - 1)}\n                disabled={page === 0}\n              >\n                &#8592;\n              </button>\n              <button\n                className=\"pipeline-history-page-btn\"\n                onClick={() => setPage(p => p + 1)}\n                disabled={page >= totalPages - 1}\n              >\n                &#8594;\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Detail Panel */}\n      <div className=\"pipeline-history-detail\">\n        {!selectedSession ? (\n          <div className=\"pipeline-history-detail-empty\">\n            <div className=\"pipeline-history-detail-empty-icon\">&#128203;</div>\n            <p className=\"pipeline-history-detail-empty-text\">\n              Select a session to view details\n            </p>\n          </div>\n        ) : loadingDetail ? (\n          <div className=\"pipeline-history-loading\">\n            <div className=\"pipeline-history-loading-spinner\" />\n            Loading session details...\n          </div>\n        ) : (\n          <>\n            {/* Detail Header */}\n            <div className=\"pipeline-history-detail-header\">\n              <div className=\"pipeline-history-detail-info\">\n                <h2 className=\"pipeline-history-detail-title\">\n                  {selectedSession.taskTitle || selectedSession.taskId}\n                </h2>\n                <div className=\"pipeline-history-detail-meta\">\n                  <div className=\"pipeline-history-detail-meta-item\">\n                    <span className=\"pipeline-history-detail-meta-label\">Status:</span>\n                    <Badge status={selectedSession.status}>\n                      {selectedSession.status.replace('_', ' ')}\n                    </Badge>\n                  </div>\n                  <div className=\"pipeline-history-detail-meta-item\">\n                    <span className=\"pipeline-history-detail-meta-label\">Workflow:</span>\n                    <span className=\"pipeline-history-detail-meta-value\">{selectedSession.workflowType}</span>\n                  </div>\n                  <div className=\"pipeline-history-detail-meta-item\">\n                    <span className=\"pipeline-history-detail-meta-label\">Started:</span>\n                    <span className=\"pipeline-history-detail-meta-value\">{formatDate(selectedSession.createdAt)}</span>\n                  </div>\n                  {selectedSession.duration && (\n                    <div className=\"pipeline-history-detail-meta-item\">\n                      <span className=\"pipeline-history-detail-meta-label\">Duration:</span>\n                      <span className=\"pipeline-history-detail-meta-value\">{formatDuration(selectedSession.duration)}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n              <div className=\"pipeline-history-detail-actions\">\n                <Button\n                  variant=\"secondary\"\n                  size=\"sm\"\n                  onClick={handleCopyLink}\n                  title=\"Copy shareable link\"\n                >\n                  {linkCopied ? '\\u2713 Copied' : '\\ud83d\\udd17 Share'}\n                </Button>\n                {selectedSession.status === 'running' && onConnectLive && (\n                  <Button\n                    variant=\"primary\"\n                    size=\"sm\"\n                    onClick={() => onConnectLive(selectedSession.pipelineId, selectedSession.taskTitle)}\n                  >\n                    Watch Live\n                  </Button>\n                )}\n                {selectedSession.status === 'waiting_approval' && (\n                  <>\n                    <Button\n                      variant=\"secondary\"\n                      size=\"sm\"\n                      onClick={() => handleResume(false)}\n                      loading={resuming}\n                    >\n                      Reject\n                    </Button>\n                    <Button\n                      variant=\"primary\"\n                      size=\"sm\"\n                      onClick={() => handleResume(true)}\n                      loading={resuming}\n                    >\n                      Approve\n                    </Button>\n                  </>\n                )}\n                <Button\n                  variant=\"secondary\"\n                  size=\"sm\"\n                  onClick={() => setDeleteConfirm(selectedSession.pipelineId)}\n                >\n                  Delete\n                </Button>\n              </div>\n            </div>\n\n            {/* Detail Content */}\n            <div className=\"pipeline-history-detail-content\">\n              {/* Stats */}\n              <div className=\"pipeline-history-session-stats\">\n                {selectedSession.duration && (\n                  <div className=\"pipeline-history-stat-card\">\n                    <div className=\"pipeline-history-stat-value\">{formatDuration(selectedSession.duration)}</div>\n                    <div className=\"pipeline-history-stat-label\">Duration</div>\n                  </div>\n                )}\n                {selectedSession.cost !== undefined && (\n                  <div className=\"pipeline-history-stat-card\">\n                    <div className=\"pipeline-history-stat-value\">{formatCost(selectedSession.cost)}</div>\n                    <div className=\"pipeline-history-stat-label\">Cost</div>\n                  </div>\n                )}\n                {selectedSession.eventCount !== undefined && (\n                  <div className=\"pipeline-history-stat-card\">\n                    <div className=\"pipeline-history-stat-value\">{selectedSession.eventCount}</div>\n                    <div className=\"pipeline-history-stat-label\">Events</div>\n                  </div>\n                )}\n              </div>\n\n              {/* PR Link */}\n              {selectedSession.prUrl && (\n                <a\n                  href={selectedSession.prUrl}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"pipeline-history-pr-link\"\n                >\n                  View Pull Request &#8594;\n                </a>\n              )}\n\n              {/* Events */}\n              <div className=\"pipeline-history-events-header\">\n                <h3 className=\"pipeline-history-events-title\">Events</h3>\n                <div className=\"pipeline-history-events-filters\">\n                  {CATEGORY_FILTERS.map((filter) => (\n                    <button\n                      key={filter.value}\n                      className={`pipeline-history-status-filter ${eventFilter === filter.value ? 'active' : ''}`}\n                      onClick={() => setEventFilter(filter.value)}\n                    >\n                      {filter.label}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Selection toolbar */}\n              {filteredEvents.length > 0 && (\n                <div className=\"pipeline-history-selection-toolbar\">\n                  <div className=\"pipeline-history-selection-info\">\n                    {selectedEventIndices.size > 0 ? (\n                      <span>{selectedEventIndices.size} selected</span>\n                    ) : (\n                      <span className=\"pipeline-history-selection-hint\">\n                        Click to select &bull; Cmd/Ctrl+click for multiple &bull; Shift+click for range\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"pipeline-history-selection-actions\">\n                    {selectedEventIndices.size > 0 && (\n                      <>\n                        <button\n                          className=\"pipeline-history-selection-btn\"\n                          onClick={handleClearSelection}\n                        >\n                          Clear\n                        </button>\n                        <button\n                          className=\"pipeline-history-selection-btn primary\"\n                          onClick={handleCopySelected}\n                        >\n                          {copySuccess ? '\\u2713 Copied!' : `Copy ${selectedEventIndices.size} event${selectedEventIndices.size > 1 ? 's' : ''}`}\n                        </button>\n                      </>\n                    )}\n                    {selectedEventIndices.size === 0 && (\n                      <button\n                        className=\"pipeline-history-selection-btn\"\n                        onClick={handleSelectAll}\n                      >\n                        Select All\n                      </button>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              <div className=\"pipeline-history-events-list\">\n                {filteredEvents.length === 0 ? (\n                  <div className=\"pipeline-history-empty\">No events</div>\n                ) : (\n                  filteredEvents.map((event: PipelineEvent, i: number) => (\n                    <div\n                      key={`${event.type}-${event.timestamp}-${i}`}\n                      className={`pipeline-history-event-wrapper ${selectedEventIndices.has(i) ? 'selected' : ''}`}\n                      onClick={(e) => handleEventSelect(i, e)}\n                    >\n                      <TimelineEvent\n                        event={event}\n                        isGrouped={isMinorEvent(event)}\n                      />\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n\n      {/* Delete Confirmation Dialog */}\n      {deleteConfirm && (\n        <div className=\"pipeline-history-confirm-overlay\" onClick={() => setDeleteConfirm(null)}>\n          <div className=\"pipeline-history-confirm-dialog\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"pipeline-history-confirm-title\">Delete Session?</h3>\n            <p className=\"pipeline-history-confirm-text\">\n              This will permanently delete this session and all its events. This action cannot be undone.\n            </p>\n            <div className=\"pipeline-history-confirm-actions\">\n              <Button variant=\"secondary\" onClick={() => setDeleteConfirm(null)}>\n                Cancel\n              </Button>\n              <Button variant=\"danger\" onClick={handleDelete} loading={deleting}>\n                Delete\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useEffect, useRef, type ReactNode } from 'react';\nimport { createPortal } from 'react-dom';\nimport './Modal.css';\n\nexport interface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title?: string;\n  children: ReactNode;\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n  showClose?: boolean;\n}\n\nexport function Modal({\n  isOpen,\n  onClose,\n  title,\n  children,\n  size = 'md',\n  showClose = true,\n}: ModalProps) {\n  const overlayRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = '';\n    }\n\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [isOpen]);\n\n  useEffect(() => {\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscape);\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [isOpen, onClose]);\n\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === overlayRef.current) {\n      onClose();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return createPortal(\n    <div\n      ref={overlayRef}\n      className=\"pipeline-modal-overlay\"\n      onClick={handleOverlayClick}\n    >\n      <div className={`pipeline-modal pipeline-modal-${size}`}>\n        {(title || showClose) && (\n          <div className=\"pipeline-modal-header\">\n            {title && <h2 className=\"pipeline-modal-title\">{title}</h2>}\n            {showClose && (\n              <button\n                className=\"pipeline-modal-close\"\n                onClick={onClose}\n                aria-label=\"Close modal\"\n              >\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" width=\"20\" height=\"20\">\n                  <path\n                    d=\"M18 6L6 18M6 6L18 18\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                  />\n                </svg>\n              </button>\n            )}\n          </div>\n        )}\n        <div className=\"pipeline-modal-content\">{children}</div>\n      </div>\n    </div>,\n    document.body\n  );\n}\n","import { useState } from 'react';\nimport type { WorkflowType, VerbosityLevel, ModelType, StartPipelineRequest } from '../../types';\nimport { Modal } from '../shared/Modal';\nimport { Button } from '../shared/Button';\nimport { useApi } from '../../hooks/useApi';\nimport { extractTaskId } from '../../services/api';\nimport './StartPipelineModal.css';\n\nexport interface StartPipelineModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onStarted: (pipelineId: string) => void;\n}\n\nconst WORKFLOW_OPTIONS: Array<{ value: WorkflowType; label: string; description: string }> = [\n  { value: 'resolve-task', label: 'Resolve Task', description: 'Full task resolution with code changes' },\n  { value: 'code-review', label: 'Code Review', description: 'Review existing code changes' },\n  { value: 'spec-analysis', label: 'Spec Analysis', description: 'Analyze specifications only' },\n  { value: 'multi-repo', label: 'Multi-Repo', description: 'Coordinate changes across repos' },\n];\n\nconst VERBOSITY_OPTIONS: Array<{ value: VerbosityLevel; label: string; icon: string }> = [\n  { value: 'condensed', label: 'Condensed', icon: '\\ud83d\\udccb' },\n  { value: 'normal', label: 'Normal', icon: '\\ud83d\\udcca' },\n  { value: 'debug', label: 'Debug', icon: '\\ud83d\\udd0d' },\n];\n\nconst MODEL_OPTIONS: Array<{ value: ModelType | 'default'; label: string }> = [\n  { value: 'default', label: 'Default' },\n  { value: 'haiku', label: 'Haiku' },\n  { value: 'sonnet', label: 'Sonnet' },\n  { value: 'opus', label: 'Opus' },\n];\n\nconst AGENTS = [\n  { id: 'task-evaluator', label: 'Task Evaluator', defaultModel: 'haiku' },\n  { id: 'repo-selector', label: 'Repo Selector', defaultModel: 'sonnet' },\n  { id: 'plan-generator', label: 'Plan Generator', defaultModel: 'sonnet' },\n  { id: 'code-executor', label: 'Code Executor', defaultModel: 'opus' },\n  { id: 'code-reviewer', label: 'Code Reviewer', defaultModel: 'opus' },\n];\n\ntype ExecutionMode = 'standard' | 'yolo' | 'dryrun';\n\nexport function StartPipelineModal({ isOpen, onClose, onStarted }: StartPipelineModalProps) {\n  const api = useApi();\n\n  const [taskInput, setTaskInput] = useState('');\n  const [workflowType, setWorkflowType] = useState<WorkflowType>('resolve-task');\n  const [executionMode, setExecutionMode] = useState<ExecutionMode>('standard');\n  const [autoCreatePr, setAutoCreatePr] = useState(true);\n  const [autoReview, setAutoReview] = useState(true);\n  const [maxBudget, setMaxBudget] = useState('10.00');\n  const [verbosity, setVerbosity] = useState<VerbosityLevel>('debug');\n  const [agentOverrides, setAgentOverrides] = useState<Record<string, ModelType | 'default'>>({});\n  const [showAdvanced, setShowAdvanced] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async () => {\n    const taskId = extractTaskId(taskInput.trim());\n    if (!taskId) {\n      setError('Please enter a task ID or URL');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const config: StartPipelineRequest = {\n        taskId,\n        workflowType,\n        skipApproval: executionMode === 'yolo',\n        dryRun: executionMode === 'dryrun',\n        autoCreatePr,\n        autoReview,\n        maxBudgetUsd: parseFloat(maxBudget) || 10,\n        verbosity,\n      };\n\n      // Add agent overrides (only non-default)\n      const overrides: Record<string, { model: ModelType }> = {};\n      Object.entries(agentOverrides).forEach(([agent, model]) => {\n        if (model !== 'default') {\n          overrides[agent] = { model };\n        }\n      });\n      if (Object.keys(overrides).length > 0) {\n        config.agentOverrides = overrides;\n      }\n\n      const result = await api.startPipeline(config);\n      onStarted(result.pipelineId);\n\n      // Reset form\n      setTaskInput('');\n      setExecutionMode('standard');\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to start pipeline');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAgentOverride = (agentId: string, model: ModelType | 'default') => {\n    setAgentOverrides((prev) => ({\n      ...prev,\n      [agentId]: model,\n    }));\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Start New Pipeline\" size=\"lg\">\n      <div className=\"pipeline-start-form\">\n        {/* Task Input */}\n        <div className=\"pipeline-start-section\">\n          <label className=\"pipeline-start-label\">Task ID or URL</label>\n          <input\n            type=\"text\"\n            value={taskInput}\n            onChange={(e) => setTaskInput(e.target.value)}\n            placeholder=\"Enter task ID or paste ShapeUp task URL...\"\n            className=\"pipeline-start-input\"\n            autoFocus\n          />\n          <p className=\"pipeline-start-hint\">\n            e.g., cmjoi1s3w003sov0153apjqpi or https://shapeup.smartup.lat/v2/tasks/...\n          </p>\n        </div>\n\n        {/* Workflow Type */}\n        <div className=\"pipeline-start-section\">\n          <label className=\"pipeline-start-label\">Workflow Type</label>\n          <div className=\"pipeline-start-workflow-grid\">\n            {WORKFLOW_OPTIONS.map((opt) => (\n              <button\n                key={opt.value}\n                type=\"button\"\n                className={`pipeline-start-workflow-card ${workflowType === opt.value ? 'selected' : ''}`}\n                onClick={() => setWorkflowType(opt.value)}\n              >\n                <span className=\"pipeline-start-workflow-label\">{opt.label}</span>\n                <span className=\"pipeline-start-workflow-desc\">{opt.description}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Execution Mode */}\n        <div className=\"pipeline-start-section\">\n          <label className=\"pipeline-start-label\">Execution Mode</label>\n          <div className=\"pipeline-start-mode-grid\">\n            <button\n              type=\"button\"\n              className={`pipeline-start-mode-card ${executionMode === 'standard' ? 'selected' : ''}`}\n              onClick={() => setExecutionMode('standard')}\n            >\n              <span className=\"pipeline-start-mode-icon\">&#9995;</span>\n              <span className=\"pipeline-start-mode-name\">Standard</span>\n              <span className=\"pipeline-start-mode-desc\">Wait for approval</span>\n            </button>\n            <button\n              type=\"button\"\n              className={`pipeline-start-mode-card yolo ${executionMode === 'yolo' ? 'selected' : ''}`}\n              onClick={() => setExecutionMode('yolo')}\n            >\n              <span className=\"pipeline-start-mode-icon\">&#9889;</span>\n              <span className=\"pipeline-start-mode-name\">YOLO</span>\n              <span className=\"pipeline-start-mode-desc\">Auto-execute</span>\n            </button>\n            <button\n              type=\"button\"\n              className={`pipeline-start-mode-card ${executionMode === 'dryrun' ? 'selected' : ''}`}\n              onClick={() => setExecutionMode('dryrun')}\n            >\n              <span className=\"pipeline-start-mode-icon\">&#128221;</span>\n              <span className=\"pipeline-start-mode-name\">Dry Run</span>\n              <span className=\"pipeline-start-mode-desc\">Plan only</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Options Row */}\n        <div className=\"pipeline-start-options-row\">\n          <div className=\"pipeline-start-toggle-group\">\n            <label className=\"pipeline-start-toggle\">\n              <input\n                type=\"checkbox\"\n                checked={autoCreatePr}\n                onChange={(e) => setAutoCreatePr(e.target.checked)}\n              />\n              <span className=\"pipeline-start-toggle-slider\" />\n              <span className=\"pipeline-start-toggle-label\">Auto-create PR</span>\n            </label>\n            <label className=\"pipeline-start-toggle\">\n              <input\n                type=\"checkbox\"\n                checked={autoReview}\n                onChange={(e) => setAutoReview(e.target.checked)}\n              />\n              <span className=\"pipeline-start-toggle-slider\" />\n              <span className=\"pipeline-start-toggle-label\">Auto-review</span>\n            </label>\n          </div>\n\n          <div className=\"pipeline-start-input-group\">\n            <label className=\"pipeline-start-small-label\">Max Budget</label>\n            <div className=\"pipeline-start-budget-input\">\n              <span className=\"pipeline-start-budget-prefix\">$</span>\n              <input\n                type=\"number\"\n                value={maxBudget}\n                onChange={(e) => setMaxBudget(e.target.value)}\n                min=\"0.01\"\n                max=\"100\"\n                step=\"0.01\"\n              />\n            </div>\n          </div>\n\n          <div className=\"pipeline-start-input-group\">\n            <label className=\"pipeline-start-small-label\">Verbosity</label>\n            <div className=\"pipeline-start-verbosity-buttons\">\n              {VERBOSITY_OPTIONS.map((opt) => (\n                <button\n                  key={opt.value}\n                  type=\"button\"\n                  className={`pipeline-start-verbosity-btn ${verbosity === opt.value ? 'selected' : ''}`}\n                  onClick={() => setVerbosity(opt.value)}\n                  title={opt.label}\n                >\n                  {opt.icon}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Advanced Options */}\n        <div className=\"pipeline-start-advanced-section\">\n          <button\n            type=\"button\"\n            className=\"pipeline-start-advanced-toggle\"\n            onClick={() => setShowAdvanced(!showAdvanced)}\n          >\n            <span>{showAdvanced ? '\\u25bc' : '\\u25b6'}</span>\n            <span>Agent Model Overrides</span>\n          </button>\n\n          {showAdvanced && (\n            <div className=\"pipeline-start-agent-overrides\">\n              {AGENTS.map((agent) => (\n                <div key={agent.id} className=\"pipeline-start-agent-row\">\n                  <span className=\"pipeline-start-agent-name\">{agent.label}</span>\n                  <span className=\"pipeline-start-agent-default\">({agent.defaultModel})</span>\n                  <select\n                    value={agentOverrides[agent.id] || 'default'}\n                    onChange={(e) => handleAgentOverride(agent.id, e.target.value as ModelType | 'default')}\n                    className=\"pipeline-start-agent-select\"\n                  >\n                    {MODEL_OPTIONS.map((m) => (\n                      <option key={m.value} value={m.value}>\n                        {m.label}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {error && <p className=\"pipeline-start-error\">{error}</p>}\n\n        {/* Actions */}\n        <div className=\"pipeline-start-actions\">\n          <Button variant=\"secondary\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button\n            variant=\"primary\"\n            onClick={handleSubmit}\n            loading={loading}\n            icon={\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" width=\"16\" height=\"16\">\n                <path\n                  d=\"M5 12h14m-7-7l7 7-7 7\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                />\n              </svg>\n            }\n          >\n            Start Pipeline\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect, useCallback, useRef } from 'react';\nimport type { Session, SessionDetail, PipelineStatus } from '../types';\nimport { useApi } from './useApi';\n\nexport interface UseSessionsOptions {\n  /** Status filter for sessions */\n  status?: PipelineStatus | 'all';\n  /** Poll interval in ms (default: 10000, set to 0 to disable) */\n  pollInterval?: number;\n  /** Number of sessions per page */\n  pageSize?: number;\n  /** Initial page (0-indexed) */\n  initialPage?: number;\n}\n\ninterface UseSessionsReturn {\n  sessions: Session[];\n  total: number;\n  loading: boolean;\n  error: Error | null;\n  page: number;\n  totalPages: number;\n  setPage: (page: number) => void;\n  setStatus: (status: PipelineStatus | 'all') => void;\n  refresh: () => Promise<void>;\n}\n\n/**\n * Hook to fetch and manage session list with polling\n *\n * @example\n * ```tsx\n * function SessionList() {\n *   const { sessions, loading, page, setPage, totalPages } = useSessions({\n *     status: 'completed',\n *     pollInterval: 30000, // Poll every 30s\n *   });\n *\n *   if (loading) return <div>Loading...</div>;\n *\n *   return (\n *     <ul>\n *       {sessions.map(s => (\n *         <li key={s.pipelineId}>{s.taskTitle}</li>\n *       ))}\n *     </ul>\n *   );\n * }\n * ```\n */\nexport function useSessions(options: UseSessionsOptions = {}): UseSessionsReturn {\n  const {\n    status: initialStatus = 'all',\n    pollInterval = 10000,\n    pageSize = 20,\n    initialPage = 0,\n  } = options;\n\n  const api = useApi();\n  const [sessions, setSessions] = useState<Session[]>([]);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const [page, setPage] = useState(initialPage);\n  const [status, setStatus] = useState<PipelineStatus | 'all'>(initialStatus);\n  const pollRef = useRef<NodeJS.Timeout | null>(null);\n\n  const fetchSessions = useCallback(async () => {\n    try {\n      const result = await api.listSessions({\n        status: status !== 'all' ? status : undefined,\n        source: 'merged',\n        limit: pageSize,\n        offset: page * pageSize,\n      });\n\n      // Sort by createdAt descending (newest first)\n      const sortedSessions = [...result.sessions].sort((a, b) =>\n        new Date(b.createdAt || 0).getTime() - new Date(a.createdAt || 0).getTime()\n      );\n\n      setSessions(sortedSessions);\n      setTotal(result.total);\n      setError(null);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch sessions'));\n    } finally {\n      setLoading(false);\n    }\n  }, [api, status, page, pageSize]);\n\n  // Initial fetch and polling\n  useEffect(() => {\n    setLoading(true);\n    fetchSessions();\n\n    if (pollInterval > 0) {\n      pollRef.current = setInterval(fetchSessions, pollInterval);\n    }\n\n    return () => {\n      if (pollRef.current) {\n        clearInterval(pollRef.current);\n      }\n    };\n  }, [fetchSessions, pollInterval]);\n\n  // Reset page when status changes\n  useEffect(() => {\n    setPage(0);\n  }, [status]);\n\n  const totalPages = Math.ceil(total / pageSize);\n\n  return {\n    sessions,\n    total,\n    loading,\n    error,\n    page,\n    totalPages,\n    setPage,\n    setStatus,\n    refresh: fetchSessions,\n  };\n}\n\nexport interface UseSessionDetailOptions {\n  /** Pipeline ID to fetch */\n  pipelineId: string | null;\n  /** Poll interval in ms for running/waiting sessions (default: 5000, set to 0 to disable) */\n  pollInterval?: number;\n}\n\ninterface UseSessionDetailReturn {\n  session: SessionDetail | null;\n  loading: boolean;\n  error: Error | null;\n  refresh: () => Promise<void>;\n}\n\n/**\n * Hook to fetch session details with optional polling for active sessions\n *\n * @example\n * ```tsx\n * function SessionDetail({ pipelineId }: { pipelineId: string }) {\n *   const { session, loading } = useSessionDetail({ pipelineId });\n *\n *   if (loading) return <div>Loading...</div>;\n *   if (!session) return <div>Not found</div>;\n *\n *   return (\n *     <div>\n *       <h2>{session.taskTitle}</h2>\n *       <p>Events: {session.events.length}</p>\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useSessionDetail(options: UseSessionDetailOptions): UseSessionDetailReturn {\n  const { pipelineId, pollInterval = 5000 } = options;\n\n  const api = useApi();\n  const [session, setSession] = useState<SessionDetail | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const pollRef = useRef<NodeJS.Timeout | null>(null);\n\n  const fetchSession = useCallback(async () => {\n    if (!pipelineId) {\n      setSession(null);\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const result = await api.getSession(pipelineId);\n      setSession(result);\n      setError(null);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Failed to fetch session'));\n    } finally {\n      setLoading(false);\n    }\n  }, [api, pipelineId]);\n\n  useEffect(() => {\n    setLoading(true);\n    fetchSession();\n\n    // Clear previous poll\n    if (pollRef.current) {\n      clearInterval(pollRef.current);\n      pollRef.current = null;\n    }\n\n    return () => {\n      if (pollRef.current) {\n        clearInterval(pollRef.current);\n      }\n    };\n  }, [pipelineId, fetchSession]);\n\n  // Set up polling for active sessions\n  useEffect(() => {\n    if (pollRef.current) {\n      clearInterval(pollRef.current);\n      pollRef.current = null;\n    }\n\n    const isActive = session?.status === 'running' || session?.status === 'waiting_approval';\n\n    if (isActive && pollInterval > 0) {\n      pollRef.current = setInterval(fetchSession, pollInterval);\n    }\n\n    return () => {\n      if (pollRef.current) {\n        clearInterval(pollRef.current);\n      }\n    };\n  }, [session?.status, pollInterval, fetchSession]);\n\n  return {\n    session,\n    loading,\n    error,\n    refresh: fetchSession,\n  };\n}\n","// WebSocket Hook - Single connection management\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport type { PipelineEvent } from '../types';\nimport { useApi } from './useApi';\n\nexport type ConnectionStatus = 'connecting' | 'connected' | 'disconnected' | 'error';\n\nexport interface UseWebSocketOptions {\n  onEvent?: (event: PipelineEvent) => void;\n  onStatusChange?: (status: string) => void;\n  autoReconnect?: boolean;\n  reconnectInterval?: number;\n}\n\ninterface UseWebSocketReturn {\n  status: ConnectionStatus;\n  events: PipelineEvent[];\n  connect: () => void;\n  disconnect: () => void;\n  clearEvents: () => void;\n}\n\n/**\n * Hook to manage a WebSocket connection to a pipeline\n *\n * @example\n * ```tsx\n * function LivePipeline({ pipelineId }: { pipelineId: string }) {\n *   const { status, events } = useWebSocket(pipelineId, {\n *     onEvent: (event) => console.log('New event:', event),\n *   });\n *\n *   return (\n *     <div>\n *       <p>Status: {status}</p>\n *       <p>Events: {events.length}</p>\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useWebSocket(\n  pipelineId: string | null,\n  options: UseWebSocketOptions = {}\n): UseWebSocketReturn {\n  const {\n    onEvent,\n    onStatusChange,\n    autoReconnect = false,\n    reconnectInterval = 5000,\n  } = options;\n\n  const api = useApi();\n  const [status, setStatus] = useState<ConnectionStatus>('disconnected');\n  const [events, setEvents] = useState<PipelineEvent[]>([]);\n  const wsRef = useRef<WebSocket | null>(null);\n  const reconnectTimeoutRef = useRef<number | null>(null);\n\n  const updateStatus = useCallback(\n    (newStatus: ConnectionStatus) => {\n      setStatus(newStatus);\n      onStatusChange?.(newStatus);\n    },\n    [onStatusChange]\n  );\n\n  const connect = useCallback(() => {\n    if (!pipelineId || wsRef.current?.readyState === WebSocket.OPEN) {\n      return;\n    }\n\n    // Clear any pending reconnect\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n      reconnectTimeoutRef.current = null;\n    }\n\n    updateStatus('connecting');\n\n    const wsUrl = api.getWebSocketUrl(pipelineId);\n    const ws = new WebSocket(wsUrl);\n\n    ws.onopen = () => {\n      updateStatus('connected');\n    };\n\n    ws.onclose = () => {\n      updateStatus('disconnected');\n      wsRef.current = null;\n\n      // Auto reconnect if enabled\n      if (autoReconnect && pipelineId) {\n        reconnectTimeoutRef.current = window.setTimeout(() => {\n          connect();\n        }, reconnectInterval);\n      }\n    };\n\n    ws.onerror = () => {\n      updateStatus('error');\n    };\n\n    ws.onmessage = (e) => {\n      try {\n        const data = JSON.parse(e.data);\n\n        // Handle event message\n        if (data.event) {\n          const event = data.event as PipelineEvent;\n          setEvents((prev) => [...prev, event]);\n          onEvent?.(event);\n        }\n\n        // Handle initial connection with historical events\n        if (data.type === 'connected' && data.events) {\n          setEvents(data.events);\n        }\n\n        // Handle status updates\n        if (data.status) {\n          onStatusChange?.(data.status);\n        }\n      } catch (err) {\n        console.error('WebSocket message parse error:', err);\n      }\n    };\n\n    wsRef.current = ws;\n  }, [pipelineId, autoReconnect, reconnectInterval, updateStatus, onEvent, onStatusChange, api]);\n\n  const disconnect = useCallback(() => {\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n      reconnectTimeoutRef.current = null;\n    }\n\n    if (wsRef.current) {\n      wsRef.current.close();\n      wsRef.current = null;\n    }\n\n    updateStatus('disconnected');\n  }, [updateStatus]);\n\n  const clearEvents = useCallback(() => {\n    setEvents([]);\n  }, []);\n\n  // Auto-connect when pipelineId changes\n  useEffect(() => {\n    if (pipelineId) {\n      connect();\n    }\n\n    return () => {\n      disconnect();\n    };\n  }, [pipelineId]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    status,\n    events,\n    connect,\n    disconnect,\n    clearEvents,\n  };\n}\n"]}